<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<title>ChibiOS/RT: Mutexes</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="custom.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ChibiOS/RT
   &#160;<span id="projectnumber">6.1.2</span>
<script type="text/javascript"><!--
google_ad_client = "pub-3840594581853944";
/* Documentation, bottom, 728x90, created 9/19/10 */
google_ad_slot = "1902290615";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__mutexes.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Mutexes<div class="ingroups"><a class="el" href="group__kernel.html">RT Kernel</a> &raquo; <a class="el" href="group__synchronization.html">Synchronization</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for Mutexes:</div>
<div class="dyncontent">
<div class="center"><img src="group__mutexes.png" border="0" usemap="#group____mutexes" alt=""/></div>
<map name="group____mutexes" id="group____mutexes">
<area shape="rect" href="group__synchronization.html" title=" " alt="" coords="5,5,115,28"/>
<area shape="rect" title=" " alt="" coords="163,5,229,28"/>
</map>
</div>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Mutexes related APIs and services. </p><h2>Operation mode</h2>
<p>A mutex is a threads synchronization object that can be in two distinct states:</p><ul>
<li>Not owned (unlocked).</li>
<li>Owned by a thread (locked).</li>
</ul>
<p>Operations defined for mutexes:</p><ul>
<li><b>Lock</b>: The mutex is checked, if the mutex is not owned by some other thread then it is associated to the locking thread else the thread is queued on the mutex in a list ordered by priority.</li>
<li><b>Unlock</b>: The mutex is released by the owner and the highest priority thread waiting in the queue, if any, is resumed and made owner of the mutex.</li>
</ul>
<h2>Constraints</h2>
<p>In ChibiOS/RT the Unlock operations must always be performed in lock-reverse order. This restriction both improves the performance and is required for an efficient implementation of the priority inheritance mechanism.<br  />
 Operating under this restriction also ensures that deadlocks are no possible.</p>
<h2>Recursive mode</h2>
<p>By default mutexes are not recursive, this mean that it is not possible to take a mutex already owned by the same thread. It is possible to enable the recursive behavior by enabling the option <code>CH_CFG_USE_MUTEXES_RECURSIVE</code>.</p>
<h2>The priority inversion problem</h2>
<p>The mutexes in ChibiOS/RT implements the <b>full</b> priority inheritance mechanism in order handle the priority inversion problem.<br  />
 When a thread is queued on a mutex, any thread, directly or indirectly, holding the mutex gains the same priority of the waiting thread (if their priority was not already equal or higher). The mechanism works with any number of nested mutexes and any number of involved threads. The algorithm complexity (worst case) is N with N equal to the number of nested mutexes. </p><dl class="section pre"><dt>Precondition</dt><dd>In order to use the mutex APIs the <code>CH_CFG_USE_MUTEXES</code> option must be enabled in <code><a class="el" href="chconf_8h.html" title="Configuration file template.">chconf.h</a></code>. </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>Enabling mutexes requires 5-12 (depending on the architecture) extra bytes in the <code>thread_t</code> structure. </dd></dl>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga01a9ed719f222e64589413d6eda7396e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mutexes.html#ga01a9ed719f222e64589413d6eda7396e">_MUTEX_DATA</a>(name)&#160;&#160;&#160;{<a class="el" href="group__threads.html#ga0d2fbf3711698f10ec5378bb64fad7ea">_THREADS_QUEUE_DATA</a>(name.queue), NULL, NULL, 0}</td></tr>
<tr class="memdesc:ga01a9ed719f222e64589413d6eda7396e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Data part of a static mutex initializer.  <a href="group__mutexes.html#ga01a9ed719f222e64589413d6eda7396e">More...</a><br /></td></tr>
<tr class="separator:ga01a9ed719f222e64589413d6eda7396e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0461d963db5d730f1829eb783f6fdf94"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mutexes.html#ga0461d963db5d730f1829eb783f6fdf94">MUTEX_DECL</a>(name)&#160;&#160;&#160;<a class="el" href="group__mutexes.html#ga8ed8fbed56e1bda7b0315beb4efd04b3">mutex_t</a> name = <a class="el" href="group__mutexes.html#ga01a9ed719f222e64589413d6eda7396e">_MUTEX_DATA</a>(name)</td></tr>
<tr class="memdesc:ga0461d963db5d730f1829eb783f6fdf94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Static mutex initializer.  <a href="group__mutexes.html#ga0461d963db5d730f1829eb783f6fdf94">More...</a><br /></td></tr>
<tr class="separator:ga0461d963db5d730f1829eb783f6fdf94"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga8ed8fbed56e1bda7b0315beb4efd04b3"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structch__mutex.html">ch_mutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mutexes.html#ga8ed8fbed56e1bda7b0315beb4efd04b3">mutex_t</a></td></tr>
<tr class="memdesc:ga8ed8fbed56e1bda7b0315beb4efd04b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of a mutex structure.  <a href="group__mutexes.html#ga8ed8fbed56e1bda7b0315beb4efd04b3">More...</a><br /></td></tr>
<tr class="separator:ga8ed8fbed56e1bda7b0315beb4efd04b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structch__mutex.html">ch_mutex</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mutex structure.  <a href="structch__mutex.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gad2a9a30e775fdf81dca878810c9c52cd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mutexes.html#gad2a9a30e775fdf81dca878810c9c52cd">chMtxObjectInit</a> (<a class="el" href="group__mutexes.html#ga8ed8fbed56e1bda7b0315beb4efd04b3">mutex_t</a> *mp)</td></tr>
<tr class="memdesc:gad2a9a30e775fdf81dca878810c9c52cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes s <code>mutex_t</code> structure.  <a href="group__mutexes.html#gad2a9a30e775fdf81dca878810c9c52cd">More...</a><br /></td></tr>
<tr class="separator:gad2a9a30e775fdf81dca878810c9c52cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf4278d6222cbbc6c74e95de7a1bbc8a4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mutexes.html#gaf4278d6222cbbc6c74e95de7a1bbc8a4">chMtxLock</a> (<a class="el" href="group__mutexes.html#ga8ed8fbed56e1bda7b0315beb4efd04b3">mutex_t</a> *mp)</td></tr>
<tr class="memdesc:gaf4278d6222cbbc6c74e95de7a1bbc8a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Locks the specified mutex.  <a href="group__mutexes.html#gaf4278d6222cbbc6c74e95de7a1bbc8a4">More...</a><br /></td></tr>
<tr class="separator:gaf4278d6222cbbc6c74e95de7a1bbc8a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac4b8d302ec2616e2d805375a8cb8ae9d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mutexes.html#gac4b8d302ec2616e2d805375a8cb8ae9d">chMtxLockS</a> (<a class="el" href="group__mutexes.html#ga8ed8fbed56e1bda7b0315beb4efd04b3">mutex_t</a> *mp)</td></tr>
<tr class="memdesc:gac4b8d302ec2616e2d805375a8cb8ae9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Locks the specified mutex.  <a href="group__mutexes.html#gac4b8d302ec2616e2d805375a8cb8ae9d">More...</a><br /></td></tr>
<tr class="separator:gac4b8d302ec2616e2d805375a8cb8ae9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabc9d3516061a8a1e310eae04781afd36"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mutexes.html#gabc9d3516061a8a1e310eae04781afd36">chMtxTryLock</a> (<a class="el" href="group__mutexes.html#ga8ed8fbed56e1bda7b0315beb4efd04b3">mutex_t</a> *mp)</td></tr>
<tr class="memdesc:gabc9d3516061a8a1e310eae04781afd36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tries to lock a mutex.  <a href="group__mutexes.html#gabc9d3516061a8a1e310eae04781afd36">More...</a><br /></td></tr>
<tr class="separator:gabc9d3516061a8a1e310eae04781afd36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga68812b954307a9458826a806c395525f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mutexes.html#ga68812b954307a9458826a806c395525f">chMtxTryLockS</a> (<a class="el" href="group__mutexes.html#ga8ed8fbed56e1bda7b0315beb4efd04b3">mutex_t</a> *mp)</td></tr>
<tr class="memdesc:ga68812b954307a9458826a806c395525f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tries to lock a mutex.  <a href="group__mutexes.html#ga68812b954307a9458826a806c395525f">More...</a><br /></td></tr>
<tr class="separator:ga68812b954307a9458826a806c395525f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga01630802b66eae988109e8a78147e988"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mutexes.html#ga01630802b66eae988109e8a78147e988">chMtxUnlock</a> (<a class="el" href="group__mutexes.html#ga8ed8fbed56e1bda7b0315beb4efd04b3">mutex_t</a> *mp)</td></tr>
<tr class="memdesc:ga01630802b66eae988109e8a78147e988"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlocks the specified mutex.  <a href="group__mutexes.html#ga01630802b66eae988109e8a78147e988">More...</a><br /></td></tr>
<tr class="separator:ga01630802b66eae988109e8a78147e988"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac9ccd2e7b142de84a3fde7e9c8e6e445"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mutexes.html#gac9ccd2e7b142de84a3fde7e9c8e6e445">chMtxUnlockS</a> (<a class="el" href="group__mutexes.html#ga8ed8fbed56e1bda7b0315beb4efd04b3">mutex_t</a> *mp)</td></tr>
<tr class="memdesc:gac9ccd2e7b142de84a3fde7e9c8e6e445"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlocks the specified mutex.  <a href="group__mutexes.html#gac9ccd2e7b142de84a3fde7e9c8e6e445">More...</a><br /></td></tr>
<tr class="separator:gac9ccd2e7b142de84a3fde7e9c8e6e445"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3f36a86fe485984ae29f7cb447c69221"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mutexes.html#ga3f36a86fe485984ae29f7cb447c69221">chMtxUnlockAllS</a> (void)</td></tr>
<tr class="memdesc:ga3f36a86fe485984ae29f7cb447c69221"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlocks all mutexes owned by the invoking thread.  <a href="group__mutexes.html#ga3f36a86fe485984ae29f7cb447c69221">More...</a><br /></td></tr>
<tr class="separator:ga3f36a86fe485984ae29f7cb447c69221"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga853b4ced43d22fb5d82678dd2f0aba75"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mutexes.html#ga853b4ced43d22fb5d82678dd2f0aba75">chMtxUnlockAll</a> (void)</td></tr>
<tr class="memdesc:ga853b4ced43d22fb5d82678dd2f0aba75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlocks all mutexes owned by the invoking thread.  <a href="group__mutexes.html#ga853b4ced43d22fb5d82678dd2f0aba75">More...</a><br /></td></tr>
<tr class="separator:ga853b4ced43d22fb5d82678dd2f0aba75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga89933152191cb4dfce30c2a6f42f8758"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mutexes.html#ga89933152191cb4dfce30c2a6f42f8758">chMtxQueueNotEmptyS</a> (<a class="el" href="group__mutexes.html#ga8ed8fbed56e1bda7b0315beb4efd04b3">mutex_t</a> *mp)</td></tr>
<tr class="memdesc:ga89933152191cb4dfce30c2a6f42f8758"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns <code>true</code> if the mutex queue contains at least a waiting thread.  <a href="group__mutexes.html#ga89933152191cb4dfce30c2a6f42f8758">More...</a><br /></td></tr>
<tr class="separator:ga89933152191cb4dfce30c2a6f42f8758"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4021c932a9b4a529665daf331a17b2fd"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group__scheduler.html#gaf01d0138673ae94162d218299408f142">thread_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mutexes.html#ga4021c932a9b4a529665daf331a17b2fd">chMtxGetOwnerI</a> (<a class="el" href="group__mutexes.html#ga8ed8fbed56e1bda7b0315beb4efd04b3">mutex_t</a> *mp)</td></tr>
<tr class="memdesc:ga4021c932a9b4a529665daf331a17b2fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the mutex owner thread.  <a href="group__mutexes.html#ga4021c932a9b4a529665daf331a17b2fd">More...</a><br /></td></tr>
<tr class="separator:ga4021c932a9b4a529665daf331a17b2fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6985319a4da0c708835ccc1aa2e22e5b"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group__mutexes.html#ga8ed8fbed56e1bda7b0315beb4efd04b3">mutex_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mutexes.html#ga6985319a4da0c708835ccc1aa2e22e5b">chMtxGetNextMutexX</a> (void)</td></tr>
<tr class="memdesc:ga6985319a4da0c708835ccc1aa2e22e5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the next mutex in the mutexes stack of the current thread.  <a href="group__mutexes.html#ga6985319a4da0c708835ccc1aa2e22e5b">More...</a><br /></td></tr>
<tr class="separator:ga6985319a4da0c708835ccc1aa2e22e5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga01a9ed719f222e64589413d6eda7396e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga01a9ed719f222e64589413d6eda7396e">&#9670;&nbsp;</a></span>_MUTEX_DATA</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _MUTEX_DATA</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name</td><td>)</td>
          <td>&#160;&#160;&#160;{<a class="el" href="group__threads.html#ga0d2fbf3711698f10ec5378bb64fad7ea">_THREADS_QUEUE_DATA</a>(name.queue), NULL, NULL, 0}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Data part of a static mutex initializer. </p>
<p>This macro should be used when statically initializing a mutex that is part of a bigger structure.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>the name of the mutex variable </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="chmtx_8h_source.html#l00081">81</a> of file <a class="el" href="chmtx_8h_source.html">chmtx.h</a>.</p>

</div>
</div>
<a id="ga0461d963db5d730f1829eb783f6fdf94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0461d963db5d730f1829eb783f6fdf94">&#9670;&nbsp;</a></span>MUTEX_DECL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MUTEX_DECL</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="group__mutexes.html#ga8ed8fbed56e1bda7b0315beb4efd04b3">mutex_t</a> name = <a class="el" href="group__mutexes.html#ga01a9ed719f222e64589413d6eda7396e">_MUTEX_DATA</a>(name)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Static mutex initializer. </p>
<p>Statically initialized mutexes require no explicit initialization using <code>chMtxInit()</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>the name of the mutex variable </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="chmtx_8h_source.html#l00093">93</a> of file <a class="el" href="chmtx_8h_source.html">chmtx.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ga8ed8fbed56e1bda7b0315beb4efd04b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8ed8fbed56e1bda7b0315beb4efd04b3">&#9670;&nbsp;</a></span>mutex_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structch__mutex.html">ch_mutex</a> <a class="el" href="group__mutexes.html#ga8ed8fbed56e1bda7b0315beb4efd04b3">mutex_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type of a mutex structure. </p>

<p class="definition">Definition at line <a class="el" href="chmtx_8h_source.html#l00052">52</a> of file <a class="el" href="chmtx_8h_source.html">chmtx.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gad2a9a30e775fdf81dca878810c9c52cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad2a9a30e775fdf81dca878810c9c52cd">&#9670;&nbsp;</a></span>chMtxObjectInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void chMtxObjectInit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__mutexes.html#ga8ed8fbed56e1bda7b0315beb4efd04b3">mutex_t</a> *&#160;</td>
          <td class="paramname"><em>mp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes s <code>mutex_t</code> structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">mp</td><td>pointer to a <code>mutex_t</code> structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:\n Initializer, this function just initializes an object and can be invoked before the kernel is initialized.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="chmtx_8c_source.html#l00103">103</a> of file <a class="el" href="chmtx_8c_source.html">chmtx.c</a>.</p>

<p class="reference">References <a class="el" href="group__checks__assertions.html#ga3d40b3669f5280264c24dae4a2565ff2">chDbgCheck</a>, <a class="el" href="structch__mutex.html#a4dc770b458190af1a95fee8a119da426">ch_mutex::cnt</a>, <a class="el" href="structch__mutex.html#a5669fc591d43da82fe2ed9aa3be6f1d5">ch_mutex::owner</a>, <a class="el" href="structch__mutex.html#a8929c7569d5ae40c6384b677ba5332c4">ch_mutex::queue</a>, and <a class="el" href="group__scheduler.html#ga79bee2577cd8ba9850c8c3d20ea33d30">queue_init()</a>.</p>

<p class="reference">Referenced by <a class="el" href="group__oslib__objects__factory.html#gad8cbf74312ba5a5f15b16c91ad89a018">_factory_init()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__mutexes_gad2a9a30e775fdf81dca878810c9c52cd_cgraph.png" border="0" usemap="#group__mutexes_gad2a9a30e775fdf81dca878810c9c52cd_cgraph" alt=""/></div>
<map name="group__mutexes_gad2a9a30e775fdf81dca878810c9c52cd_cgraph" id="group__mutexes_gad2a9a30e775fdf81dca878810c9c52cd_cgraph">
<area shape="rect" title="Initializes s mutex_t structure." alt="" coords="5,5,112,29"/>
<area shape="rect" href="group__scheduler.html#ga79bee2577cd8ba9850c8c3d20ea33d30" title="Threads queue initialization." alt="" coords="160,5,239,29"/>
</map>
</div>

</div>
</div>
<a id="gaf4278d6222cbbc6c74e95de7a1bbc8a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf4278d6222cbbc6c74e95de7a1bbc8a4">&#9670;&nbsp;</a></span>chMtxLock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void chMtxLock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__mutexes.html#ga8ed8fbed56e1bda7b0315beb4efd04b3">mutex_t</a> *&#160;</td>
          <td class="paramname"><em>mp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Locks the specified mutex. </p>
<dl class="section post"><dt>Postcondition</dt><dd>The mutex is locked and inserted in the per-thread stack of owned mutexes.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mp</td><td>pointer to the <code>mutex_t</code> structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:\n Normal API, this function can be invoked by regular system threads but not from within a lock zone.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="chmtx_8c_source.html#l00123">123</a> of file <a class="el" href="chmtx_8c_source.html">chmtx.c</a>.</p>

<p class="reference">References <a class="el" href="group__mutexes.html#gac4b8d302ec2616e2d805375a8cb8ae9d">chMtxLockS()</a>, <a class="el" href="group__system.html#ga464ae8092ca266ea0abffeb4c5639c8e">chSysLock()</a>, and <a class="el" href="group__system.html#gae3429d88fe6a75de02af1a089b9f620b">chSysUnlock()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__mutexes_gaf4278d6222cbbc6c74e95de7a1bbc8a4_cgraph.png" border="0" usemap="#group__mutexes_gaf4278d6222cbbc6c74e95de7a1bbc8a4_cgraph" alt=""/></div>
<map name="group__mutexes_gaf4278d6222cbbc6c74e95de7a1bbc8a4_cgraph" id="group__mutexes_gaf4278d6222cbbc6c74e95de7a1bbc8a4_cgraph">
<area shape="rect" title="Locks the specified mutex." alt="" coords="5,257,84,281"/>
<area shape="rect" href="group__mutexes.html#gac4b8d302ec2616e2d805375a8cb8ae9d" title="Locks the specified mutex." alt="" coords="135,109,220,133"/>
<area shape="rect" href="group__system.html#ga464ae8092ca266ea0abffeb4c5639c8e" title="Enters the kernel lock state." alt="" coords="138,257,217,281"/>
<area shape="rect" href="group__system.html#gae3429d88fe6a75de02af1a089b9f620b" title="Leaves the kernel lock state." alt="" coords="132,338,223,362"/>
<area shape="rect" href="group__checks__assertions.html#ga14fe880e1dbd127d46077a1d300b1167" title="S&#45;class functions context check." alt="" coords="455,13,581,37"/>
<area shape="rect" href="group__scheduler.html#ga97c1c514b755a1e71caf2f19c1ccf986" title="Puts the current thread to sleep into the specified state." alt="" coords="285,37,393,61"/>
<area shape="rect" href="group__scheduler.html#ga74665c643003d2094a5c337a6857035e" title="Inserts a thread in the Ready List placing it behind its peers." alt="" coords="293,85,384,109"/>
<area shape="rect" href="group__scheduler.html#ga2061d80ce782ea1c9822d158d7ae88b4" title="Removes a thread from a queue and returns it." alt="" coords="283,133,394,157"/>
<area shape="rect" href="group__scheduler.html#ga77b181c31a97a1b724cee544718805fd" title="Inserts a thread into a priority ordered queue." alt="" coords="279,181,398,205"/>
<area shape="rect" href="group__checks__assertions.html#gaae453ff2b98bb0711c081c0496615250" title="Guard code for chSysLock()." alt="" coords="283,229,395,253"/>
<area shape="rect" href="group__statistics.html#ga813c62177261b1b03a87ba209409b44b" title="Starts the measurement of a thread critical zone." alt="" coords="271,277,407,313"/>
<area shape="rect" href="group__checks__assertions.html#gafdb3c25c67ce61bb8ed7a9121365b71c" title="Guard code for chSysUnlock()." alt="" coords="275,338,402,362"/>
<area shape="rect" href="group__statistics.html#gadd818821c119157b1ea6cd399ee4e647" title="Stops the measurement of a thread critical zone." alt="" coords="271,387,406,423"/>
</map>
</div>

</div>
</div>
<a id="gac4b8d302ec2616e2d805375a8cb8ae9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac4b8d302ec2616e2d805375a8cb8ae9d">&#9670;&nbsp;</a></span>chMtxLockS()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void chMtxLockS </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__mutexes.html#ga8ed8fbed56e1bda7b0315beb4efd04b3">mutex_t</a> *&#160;</td>
          <td class="paramname"><em>mp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Locks the specified mutex. </p>
<dl class="section post"><dt>Postcondition</dt><dd>The mutex is locked and inserted in the per-thread stack of owned mutexes.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mp</td><td>pointer to the <code>mutex_t</code> structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:\n This is an S-Class API, this function can be invoked from within a system lock zone by threads only.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="chmtx_8c_source.html#l00139">139</a> of file <a class="el" href="chmtx_8c_source.html">chmtx.c</a>.</p>

<p class="reference">References <a class="el" href="group__scheduler.html#ga41b1771e9d9b6e8c5282c8e4b3dd42da">CH_STATE_CURRENT</a>, <a class="el" href="group__scheduler.html#ga1e1ad12c87ae8a6ee19707b1bdbe1fd4">CH_STATE_READY</a>, <a class="el" href="group__scheduler.html#gad867cf65d3c8d92766e67dfdb0b060dc">CH_STATE_SNDMSGQ</a>, <a class="el" href="group__scheduler.html#ga6e88cbec5ac68cce4293c50d11bdd3f3">CH_STATE_WTCOND</a>, <a class="el" href="group__scheduler.html#gac24b81793fe027bc132107af4e5449cb">CH_STATE_WTMTX</a>, <a class="el" href="group__scheduler.html#gafac108c3eb9f74fe26cdd41709737058">CH_STATE_WTSEM</a>, <a class="el" href="group__checks__assertions.html#ga05556bc6888b5ff5ec4edcaf4830addc">chDbgAssert</a>, <a class="el" href="group__checks__assertions.html#ga3d40b3669f5280264c24dae4a2565ff2">chDbgCheck</a>, <a class="el" href="group__checks__assertions.html#ga14fe880e1dbd127d46077a1d300b1167">chDbgCheckClassS()</a>, <a class="el" href="group__scheduler.html#ga97c1c514b755a1e71caf2f19c1ccf986">chSchGoSleepS()</a>, <a class="el" href="group__scheduler.html#ga74665c643003d2094a5c337a6857035e">chSchReadyI()</a>, <a class="el" href="structch__mutex.html#a4dc770b458190af1a95fee8a119da426">ch_mutex::cnt</a>, <a class="el" href="group__scheduler.html#ga1a5fddde56420e8accd0c09c1abb32a7">currp</a>, <a class="el" href="structch__thread.html#a70cc5dae708945afe665b950f93b2ea6">ch_thread::mtxlist</a>, <a class="el" href="structch__mutex.html#a7ca4ed305af6d8b6e00d98f2923715cc">ch_mutex::next</a>, <a class="el" href="structch__mutex.html#a5669fc591d43da82fe2ed9aa3be6f1d5">ch_mutex::owner</a>, <a class="el" href="structch__thread.html#a5736cf084d0ca1432f49745be0f6b7e7">ch_thread::prio</a>, <a class="el" href="structch__mutex.html#a8929c7569d5ae40c6384b677ba5332c4">ch_mutex::queue</a>, <a class="el" href="group__scheduler.html#ga2061d80ce782ea1c9822d158d7ae88b4">queue_dequeue()</a>, <a class="el" href="group__scheduler.html#ga77b181c31a97a1b724cee544718805fd">queue_prio_insert()</a>, <a class="el" href="structch__thread.html#aa5aaa108409a0fda860ffb05e9c2d4bd">ch_thread::state</a>, <a class="el" href="structch__thread.html#abfccd5cc3d4a3c37847c901e5f89ad2f">ch_thread::u</a>, and <a class="el" href="structch__thread.html#a079b46d79f5e63e7b322547956c03b68">ch_thread::wtmtxp</a>.</p>

<p class="reference">Referenced by <a class="el" href="group__condvars.html#gaec560823aebbc92b21f1c92ab2c2996c">chCondWaitS()</a>, <a class="el" href="group__condvars.html#ga48189fcf16cb499365879aa6c9755ba3">chCondWaitTimeoutS()</a>, and <a class="el" href="group__mutexes.html#gaf4278d6222cbbc6c74e95de7a1bbc8a4">chMtxLock()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__mutexes_gac4b8d302ec2616e2d805375a8cb8ae9d_cgraph.png" border="0" usemap="#group__mutexes_gac4b8d302ec2616e2d805375a8cb8ae9d_cgraph" alt=""/></div>
<map name="group__mutexes_gac4b8d302ec2616e2d805375a8cb8ae9d_cgraph" id="group__mutexes_gac4b8d302ec2616e2d805375a8cb8ae9d_cgraph">
<area shape="rect" title="Locks the specified mutex." alt="" coords="5,101,91,125"/>
<area shape="rect" href="group__checks__assertions.html#ga14fe880e1dbd127d46077a1d300b1167" title="S&#45;class functions context check." alt="" coords="305,5,432,29"/>
<area shape="rect" href="group__scheduler.html#ga97c1c514b755a1e71caf2f19c1ccf986" title="Puts the current thread to sleep into the specified state." alt="" coords="144,53,252,77"/>
<area shape="rect" href="group__scheduler.html#ga74665c643003d2094a5c337a6857035e" title="Inserts a thread in the Ready List placing it behind its peers." alt="" coords="153,101,243,125"/>
<area shape="rect" href="group__scheduler.html#ga2061d80ce782ea1c9822d158d7ae88b4" title="Removes a thread from a queue and returns it." alt="" coords="143,149,253,173"/>
<area shape="rect" href="group__scheduler.html#ga77b181c31a97a1b724cee544718805fd" title="Inserts a thread into a priority ordered queue." alt="" coords="139,197,257,221"/>
<area shape="rect" href="group__system.html#gaffab4052111407f092c7c65466a61450" title="Halts the system." alt="" coords="480,53,556,77"/>
<area shape="rect" href="group__scheduler.html#gaa664d185361931ac4c38b7b01af92ff2" title="Removes the first&#45;out thread from a queue and returns it." alt="" coords="306,53,431,77"/>
<area shape="rect" href="group__checks__assertions.html#ga3e4782dccbb385051e1eb01ac5b05470" title="I&#45;class functions context check." alt="" coords="307,101,430,125"/>
</map>
</div>

</div>
</div>
<a id="gabc9d3516061a8a1e310eae04781afd36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabc9d3516061a8a1e310eae04781afd36">&#9670;&nbsp;</a></span>chMtxTryLock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool chMtxTryLock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__mutexes.html#ga8ed8fbed56e1bda7b0315beb4efd04b3">mutex_t</a> *&#160;</td>
          <td class="paramname"><em>mp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tries to lock a mutex. </p>
<p>This function attempts to lock a mutex, if the mutex is already locked by another thread then the function exits without waiting. </p><dl class="section post"><dt>Postcondition</dt><dd>The mutex is locked and inserted in the per-thread stack of owned mutexes. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function does not have any overhead related to the priority inheritance mechanism because it does not try to enter a sleep state.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mp</td><td>pointer to the <code>mutex_t</code> structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>if the mutex has been successfully acquired </td></tr>
    <tr><td class="paramname">false</td><td>if the lock attempt failed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:\n Normal API, this function can be invoked by regular system threads but not from within a lock zone.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="chmtx_8c_source.html#l00255">255</a> of file <a class="el" href="chmtx_8c_source.html">chmtx.c</a>.</p>

<p class="reference">References <a class="el" href="group__mutexes.html#ga68812b954307a9458826a806c395525f">chMtxTryLockS()</a>, <a class="el" href="group__system.html#ga464ae8092ca266ea0abffeb4c5639c8e">chSysLock()</a>, and <a class="el" href="group__system.html#gae3429d88fe6a75de02af1a089b9f620b">chSysUnlock()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__mutexes_gabc9d3516061a8a1e310eae04781afd36_cgraph.png" border="0" usemap="#group__mutexes_gabc9d3516061a8a1e310eae04781afd36_cgraph" alt=""/></div>
<map name="group__mutexes_gabc9d3516061a8a1e310eae04781afd36_cgraph" id="group__mutexes_gabc9d3516061a8a1e310eae04781afd36_cgraph">
<area shape="rect" title="Tries to lock a mutex." alt="" coords="5,95,100,119"/>
<area shape="rect" href="group__mutexes.html#ga68812b954307a9458826a806c395525f" title="Tries to lock a mutex." alt="" coords="148,20,249,44"/>
<area shape="rect" href="group__system.html#ga464ae8092ca266ea0abffeb4c5639c8e" title="Enters the kernel lock state." alt="" coords="159,95,238,119"/>
<area shape="rect" href="group__system.html#gae3429d88fe6a75de02af1a089b9f620b" title="Leaves the kernel lock state." alt="" coords="153,163,244,187"/>
<area shape="rect" href="group__checks__assertions.html#ga14fe880e1dbd127d46077a1d300b1167" title="S&#45;class functions context check." alt="" coords="302,5,429,29"/>
<area shape="rect" href="group__checks__assertions.html#gaae453ff2b98bb0711c081c0496615250" title="Guard code for chSysLock()." alt="" coords="309,53,421,77"/>
<area shape="rect" href="group__statistics.html#ga813c62177261b1b03a87ba209409b44b" title="Starts the measurement of a thread critical zone." alt="" coords="297,102,433,138"/>
<area shape="rect" href="group__checks__assertions.html#gafdb3c25c67ce61bb8ed7a9121365b71c" title="Guard code for chSysUnlock()." alt="" coords="302,163,429,187"/>
<area shape="rect" href="group__statistics.html#gadd818821c119157b1ea6cd399ee4e647" title="Stops the measurement of a thread critical zone." alt="" coords="298,211,433,247"/>
</map>
</div>

</div>
</div>
<a id="ga68812b954307a9458826a806c395525f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga68812b954307a9458826a806c395525f">&#9670;&nbsp;</a></span>chMtxTryLockS()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool chMtxTryLockS </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__mutexes.html#ga8ed8fbed56e1bda7b0315beb4efd04b3">mutex_t</a> *&#160;</td>
          <td class="paramname"><em>mp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tries to lock a mutex. </p>
<p>This function attempts to lock a mutex, if the mutex is already taken by another thread then the function exits without waiting. </p><dl class="section post"><dt>Postcondition</dt><dd>The mutex is locked and inserted in the per-thread stack of owned mutexes. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function does not have any overhead related to the priority inheritance mechanism because it does not try to enter a sleep state.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mp</td><td>pointer to the <code>mutex_t</code> structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>if the mutex has been successfully acquired </td></tr>
    <tr><td class="paramname">false</td><td>if the lock attempt failed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:\n This is an S-Class API, this function can be invoked from within a system lock zone by threads only.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="chmtx_8c_source.html#l00282">282</a> of file <a class="el" href="chmtx_8c_source.html">chmtx.c</a>.</p>

<p class="reference">References <a class="el" href="group__checks__assertions.html#ga05556bc6888b5ff5ec4edcaf4830addc">chDbgAssert</a>, <a class="el" href="group__checks__assertions.html#ga3d40b3669f5280264c24dae4a2565ff2">chDbgCheck</a>, <a class="el" href="group__checks__assertions.html#ga14fe880e1dbd127d46077a1d300b1167">chDbgCheckClassS()</a>, <a class="el" href="structch__mutex.html#a4dc770b458190af1a95fee8a119da426">ch_mutex::cnt</a>, <a class="el" href="group__scheduler.html#ga1a5fddde56420e8accd0c09c1abb32a7">currp</a>, <a class="el" href="structch__mutex.html#a7ca4ed305af6d8b6e00d98f2923715cc">ch_mutex::next</a>, and <a class="el" href="structch__mutex.html#a5669fc591d43da82fe2ed9aa3be6f1d5">ch_mutex::owner</a>.</p>

<p class="reference">Referenced by <a class="el" href="group__mutexes.html#gabc9d3516061a8a1e310eae04781afd36">chMtxTryLock()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__mutexes_ga68812b954307a9458826a806c395525f_cgraph.png" border="0" usemap="#group__mutexes_ga68812b954307a9458826a806c395525f_cgraph" alt=""/></div>
<map name="group__mutexes_ga68812b954307a9458826a806c395525f_cgraph" id="group__mutexes_ga68812b954307a9458826a806c395525f_cgraph">
<area shape="rect" title="Tries to lock a mutex." alt="" coords="5,5,107,29"/>
<area shape="rect" href="group__checks__assertions.html#ga14fe880e1dbd127d46077a1d300b1167" title="S&#45;class functions context check." alt="" coords="155,5,281,29"/>
<area shape="rect" href="group__system.html#gaffab4052111407f092c7c65466a61450" title="Halts the system." alt="" coords="329,5,405,29"/>
</map>
</div>

</div>
</div>
<a id="ga01630802b66eae988109e8a78147e988"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga01630802b66eae988109e8a78147e988">&#9670;&nbsp;</a></span>chMtxUnlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void chMtxUnlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__mutexes.html#ga8ed8fbed56e1bda7b0315beb4efd04b3">mutex_t</a> *&#160;</td>
          <td class="paramname"><em>mp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unlocks the specified mutex. </p>
<dl class="section note"><dt>Note</dt><dd>Mutexes must be unlocked in reverse lock order. Violating this rules will result in a panic if assertions are enabled. </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>The invoking thread <b>must</b> have at least one owned mutex. </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>The mutex is unlocked and removed from the per-thread stack of owned mutexes.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mp</td><td>pointer to the <code>mutex_t</code> structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:\n Normal API, this function can be invoked by regular system threads but not from within a lock zone.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="chmtx_8c_source.html#l00323">323</a> of file <a class="el" href="chmtx_8c_source.html">chmtx.c</a>.</p>

<p class="reference">References <a class="el" href="group__checks__assertions.html#ga05556bc6888b5ff5ec4edcaf4830addc">chDbgAssert</a>, <a class="el" href="group__checks__assertions.html#ga3d40b3669f5280264c24dae4a2565ff2">chDbgCheck</a>, <a class="el" href="group__mutexes.html#ga89933152191cb4dfce30c2a6f42f8758">chMtxQueueNotEmptyS()</a>, <a class="el" href="group__scheduler.html#ga74665c643003d2094a5c337a6857035e">chSchReadyI()</a>, <a class="el" href="group__scheduler.html#ga4e38b4bee3d2330f6a0f1cdb7660af20">chSchRescheduleS()</a>, <a class="el" href="group__system.html#ga464ae8092ca266ea0abffeb4c5639c8e">chSysLock()</a>, <a class="el" href="group__system.html#gae3429d88fe6a75de02af1a089b9f620b">chSysUnlock()</a>, <a class="el" href="structch__mutex.html#a4dc770b458190af1a95fee8a119da426">ch_mutex::cnt</a>, <a class="el" href="group__scheduler.html#ga1a5fddde56420e8accd0c09c1abb32a7">currp</a>, <a class="el" href="structch__thread.html#a70cc5dae708945afe665b950f93b2ea6">ch_thread::mtxlist</a>, <a class="el" href="structch__mutex.html#a7ca4ed305af6d8b6e00d98f2923715cc">ch_mutex::next</a>, <a class="el" href="structch__threads__queue.html#a3cb91ff866fc2f47b6daa1ce2dc920a4">ch_threads_queue::next</a>, <a class="el" href="structch__mutex.html#a5669fc591d43da82fe2ed9aa3be6f1d5">ch_mutex::owner</a>, <a class="el" href="structch__thread.html#a5736cf084d0ca1432f49745be0f6b7e7">ch_thread::prio</a>, <a class="el" href="structch__mutex.html#a8929c7569d5ae40c6384b677ba5332c4">ch_mutex::queue</a>, <a class="el" href="group__scheduler.html#gaa664d185361931ac4c38b7b01af92ff2">queue_fifo_remove()</a>, and <a class="el" href="structch__thread.html#a3099764952ef2d266f641cd142a857b8">ch_thread::realprio</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__mutexes_ga01630802b66eae988109e8a78147e988_cgraph.png" border="0" usemap="#group__mutexes_ga01630802b66eae988109e8a78147e988_cgraph" alt=""/></div>
<map name="group__mutexes_ga01630802b66eae988109e8a78147e988_cgraph" id="group__mutexes_ga01630802b66eae988109e8a78147e988_cgraph">
<area shape="rect" title="Unlocks the specified mutex." alt="" coords="5,185,96,209"/>
<area shape="rect" href="group__mutexes.html#ga89933152191cb4dfce30c2a6f42f8758" title="Returns true if the mutex queue contains at least a waiting thread." alt="" coords="144,87,295,111"/>
<area shape="rect" href="group__scheduler.html#ga74665c643003d2094a5c337a6857035e" title="Inserts a thread in the Ready List placing it behind its peers." alt="" coords="174,15,265,39"/>
<area shape="rect" href="group__scheduler.html#ga4e38b4bee3d2330f6a0f1cdb7660af20" title="Performs a reschedule if a higher priority thread is runnable." alt="" coords="157,159,282,183"/>
<area shape="rect" href="group__scheduler.html#gaa664d185361931ac4c38b7b01af92ff2" title="Removes the first&#45;out thread from a queue and returns it." alt="" coords="559,195,684,219"/>
<area shape="rect" href="group__system.html#ga464ae8092ca266ea0abffeb4c5639c8e" title="Enters the kernel lock state." alt="" coords="180,282,259,306"/>
<area shape="rect" href="group__system.html#gae3429d88fe6a75de02af1a089b9f620b" title="Leaves the kernel lock state." alt="" coords="174,391,265,415"/>
<area shape="rect" href="group__checks__assertions.html#ga14fe880e1dbd127d46077a1d300b1167" title="S&#45;class functions context check." alt="" coords="363,87,490,111"/>
<area shape="rect" href="group__scheduler.html#ga61aefe3e3bf61cad481289ad6b59071e" title="Evaluates to true if the specified threads queue is not empty." alt="" coords="369,39,484,63"/>
<area shape="rect" href="group__checks__assertions.html#ga3e4782dccbb385051e1eb01ac5b05470" title="I&#45;class functions context check." alt="" coords="560,123,683,147"/>
<area shape="rect" href="group__scheduler.html#ga6827a67e839462e65b5765ef15709c97" title="Switches to the first thread on the runnable queue." alt="" coords="343,183,511,207"/>
<area shape="rect" href="group__scheduler.html#ga5d015074bf0c8105077bcd986a996f63" title="Determines if the current thread must reschedule." alt="" coords="357,135,496,159"/>
<area shape="rect" href="group__checks__assertions.html#gaae453ff2b98bb0711c081c0496615250" title="Guard code for chSysLock()." alt="" coords="371,282,483,306"/>
<area shape="rect" href="group__statistics.html#ga813c62177261b1b03a87ba209409b44b" title="Starts the measurement of a thread critical zone." alt="" coords="359,331,495,367"/>
<area shape="rect" href="group__checks__assertions.html#gafdb3c25c67ce61bb8ed7a9121365b71c" title="Guard code for chSysUnlock()." alt="" coords="363,391,490,415"/>
<area shape="rect" href="group__statistics.html#gadd818821c119157b1ea6cd399ee4e647" title="Stops the measurement of a thread critical zone." alt="" coords="359,440,494,476"/>
</map>
</div>

</div>
</div>
<a id="gac9ccd2e7b142de84a3fde7e9c8e6e445"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac9ccd2e7b142de84a3fde7e9c8e6e445">&#9670;&nbsp;</a></span>chMtxUnlockS()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void chMtxUnlockS </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__mutexes.html#ga8ed8fbed56e1bda7b0315beb4efd04b3">mutex_t</a> *&#160;</td>
          <td class="paramname"><em>mp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unlocks the specified mutex. </p>
<dl class="section note"><dt>Note</dt><dd>Mutexes must be unlocked in reverse lock order. Violating this rules will result in a panic if assertions are enabled. </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>The invoking thread <b>must</b> have at least one owned mutex. </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>The mutex is unlocked and removed from the per-thread stack of owned mutexes. </dd>
<dd>
This function does not reschedule so a call to a rescheduling function must be performed before unlocking the kernel.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mp</td><td>pointer to the <code>mutex_t</code> structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:\n This is an S-Class API, this function can be invoked from within a system lock zone by threads only.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="chmtx_8c_source.html#l00410">410</a> of file <a class="el" href="chmtx_8c_source.html">chmtx.c</a>.</p>

<p class="reference">References <a class="el" href="group__checks__assertions.html#ga05556bc6888b5ff5ec4edcaf4830addc">chDbgAssert</a>, <a class="el" href="group__checks__assertions.html#ga3d40b3669f5280264c24dae4a2565ff2">chDbgCheck</a>, <a class="el" href="group__checks__assertions.html#ga14fe880e1dbd127d46077a1d300b1167">chDbgCheckClassS()</a>, <a class="el" href="group__mutexes.html#ga89933152191cb4dfce30c2a6f42f8758">chMtxQueueNotEmptyS()</a>, <a class="el" href="group__scheduler.html#ga74665c643003d2094a5c337a6857035e">chSchReadyI()</a>, <a class="el" href="structch__mutex.html#a4dc770b458190af1a95fee8a119da426">ch_mutex::cnt</a>, <a class="el" href="group__scheduler.html#ga1a5fddde56420e8accd0c09c1abb32a7">currp</a>, <a class="el" href="structch__thread.html#a70cc5dae708945afe665b950f93b2ea6">ch_thread::mtxlist</a>, <a class="el" href="structch__mutex.html#a7ca4ed305af6d8b6e00d98f2923715cc">ch_mutex::next</a>, <a class="el" href="structch__threads__queue.html#a3cb91ff866fc2f47b6daa1ce2dc920a4">ch_threads_queue::next</a>, <a class="el" href="structch__mutex.html#a5669fc591d43da82fe2ed9aa3be6f1d5">ch_mutex::owner</a>, <a class="el" href="structch__thread.html#a5736cf084d0ca1432f49745be0f6b7e7">ch_thread::prio</a>, <a class="el" href="structch__mutex.html#a8929c7569d5ae40c6384b677ba5332c4">ch_mutex::queue</a>, <a class="el" href="group__scheduler.html#gaa664d185361931ac4c38b7b01af92ff2">queue_fifo_remove()</a>, and <a class="el" href="structch__thread.html#a3099764952ef2d266f641cd142a857b8">ch_thread::realprio</a>.</p>

<p class="reference">Referenced by <a class="el" href="group__condvars.html#gaec560823aebbc92b21f1c92ab2c2996c">chCondWaitS()</a>, and <a class="el" href="group__condvars.html#ga48189fcf16cb499365879aa6c9755ba3">chCondWaitTimeoutS()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__mutexes_gac9ccd2e7b142de84a3fde7e9c8e6e445_cgraph.png" border="0" usemap="#group__mutexes_gac9ccd2e7b142de84a3fde7e9c8e6e445_cgraph" alt=""/></div>
<map name="group__mutexes_gac9ccd2e7b142de84a3fde7e9c8e6e445_cgraph" id="group__mutexes_gac9ccd2e7b142de84a3fde7e9c8e6e445_cgraph">
<area shape="rect" title="Unlocks the specified mutex." alt="" coords="5,77,104,101"/>
<area shape="rect" href="group__checks__assertions.html#ga14fe880e1dbd127d46077a1d300b1167" title="S&#45;class functions context check." alt="" coords="351,5,477,29"/>
<area shape="rect" href="group__mutexes.html#ga89933152191cb4dfce30c2a6f42f8758" title="Returns true if the mutex queue contains at least a waiting thread." alt="" coords="152,53,303,77"/>
<area shape="rect" href="group__scheduler.html#ga74665c643003d2094a5c337a6857035e" title="Inserts a thread in the Ready List placing it behind its peers." alt="" coords="182,101,273,125"/>
<area shape="rect" href="group__scheduler.html#gaa664d185361931ac4c38b7b01af92ff2" title="Removes the first&#45;out thread from a queue and returns it." alt="" coords="165,149,290,173"/>
<area shape="rect" href="group__system.html#gaffab4052111407f092c7c65466a61450" title="Halts the system." alt="" coords="525,53,601,77"/>
<area shape="rect" href="group__scheduler.html#ga61aefe3e3bf61cad481289ad6b59071e" title="Evaluates to true if the specified threads queue is not empty." alt="" coords="357,53,471,77"/>
<area shape="rect" href="group__checks__assertions.html#ga3e4782dccbb385051e1eb01ac5b05470" title="I&#45;class functions context check." alt="" coords="353,101,475,125"/>
</map>
</div>

</div>
</div>
<a id="ga3f36a86fe485984ae29f7cb447c69221"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3f36a86fe485984ae29f7cb447c69221">&#9670;&nbsp;</a></span>chMtxUnlockAllS()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void chMtxUnlockAllS </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unlocks all mutexes owned by the invoking thread. </p>
<dl class="section post"><dt>Postcondition</dt><dd>The stack of owned mutexes is emptied and all the found mutexes are unlocked. </dd>
<dd>
This function does not reschedule so a call to a rescheduling function must be performed before unlocking the kernel. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function is <b>MUCH MORE</b> efficient than releasing the mutexes one by one and not just because the call overhead, this function does not have any overhead related to the priority inheritance mechanism.</dd></dl>
<dl class="section user"><dt>Function Class:\n This is an S-Class API, this function can be invoked from within a system lock zone by threads only.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="chmtx_8c_source.html#l00487">487</a> of file <a class="el" href="chmtx_8c_source.html">chmtx.c</a>.</p>

<p class="reference">References <a class="el" href="group__mutexes.html#ga89933152191cb4dfce30c2a6f42f8758">chMtxQueueNotEmptyS()</a>, <a class="el" href="group__scheduler.html#ga74665c643003d2094a5c337a6857035e">chSchReadyI()</a>, <a class="el" href="group__scheduler.html#ga4e38b4bee3d2330f6a0f1cdb7660af20">chSchRescheduleS()</a>, <a class="el" href="structch__mutex.html#a4dc770b458190af1a95fee8a119da426">ch_mutex::cnt</a>, <a class="el" href="group__scheduler.html#ga1a5fddde56420e8accd0c09c1abb32a7">currp</a>, <a class="el" href="structch__thread.html#a70cc5dae708945afe665b950f93b2ea6">ch_thread::mtxlist</a>, <a class="el" href="structch__mutex.html#a7ca4ed305af6d8b6e00d98f2923715cc">ch_mutex::next</a>, <a class="el" href="structch__mutex.html#a5669fc591d43da82fe2ed9aa3be6f1d5">ch_mutex::owner</a>, <a class="el" href="structch__thread.html#a5736cf084d0ca1432f49745be0f6b7e7">ch_thread::prio</a>, <a class="el" href="structch__mutex.html#a8929c7569d5ae40c6384b677ba5332c4">ch_mutex::queue</a>, <a class="el" href="group__scheduler.html#gaa664d185361931ac4c38b7b01af92ff2">queue_fifo_remove()</a>, and <a class="el" href="structch__thread.html#a3099764952ef2d266f641cd142a857b8">ch_thread::realprio</a>.</p>

<p class="reference">Referenced by <a class="el" href="group__mutexes.html#ga853b4ced43d22fb5d82678dd2f0aba75">chMtxUnlockAll()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__mutexes_ga3f36a86fe485984ae29f7cb447c69221_cgraph.png" border="0" usemap="#group__mutexes_ga3f36a86fe485984ae29f7cb447c69221_cgraph" alt=""/></div>
<map name="group__mutexes_ga3f36a86fe485984ae29f7cb447c69221_cgraph" id="group__mutexes_ga3f36a86fe485984ae29f7cb447c69221_cgraph">
<area shape="rect" title="Unlocks all mutexes owned by the invoking thread." alt="" coords="5,111,116,135"/>
<area shape="rect" href="group__mutexes.html#ga89933152191cb4dfce30c2a6f42f8758" title="Returns true if the mutex queue contains at least a waiting thread." alt="" coords="164,87,315,111"/>
<area shape="rect" href="group__scheduler.html#ga74665c643003d2094a5c337a6857035e" title="Inserts a thread in the Ready List placing it behind its peers." alt="" coords="194,15,285,39"/>
<area shape="rect" href="group__scheduler.html#ga4e38b4bee3d2330f6a0f1cdb7660af20" title="Performs a reschedule if a higher priority thread is runnable." alt="" coords="177,135,302,159"/>
<area shape="rect" href="group__scheduler.html#gaa664d185361931ac4c38b7b01af92ff2" title="Removes the first&#45;out thread from a queue and returns it." alt="" coords="579,195,704,219"/>
<area shape="rect" href="group__checks__assertions.html#ga14fe880e1dbd127d46077a1d300b1167" title="S&#45;class functions context check." alt="" coords="383,87,510,111"/>
<area shape="rect" href="group__scheduler.html#ga61aefe3e3bf61cad481289ad6b59071e" title="Evaluates to true if the specified threads queue is not empty." alt="" coords="389,39,504,63"/>
<area shape="rect" href="group__checks__assertions.html#ga3e4782dccbb385051e1eb01ac5b05470" title="I&#45;class functions context check." alt="" coords="580,123,703,147"/>
<area shape="rect" href="group__scheduler.html#ga6827a67e839462e65b5765ef15709c97" title="Switches to the first thread on the runnable queue." alt="" coords="363,183,531,207"/>
<area shape="rect" href="group__scheduler.html#ga5d015074bf0c8105077bcd986a996f63" title="Determines if the current thread must reschedule." alt="" coords="377,135,516,159"/>
</map>
</div>

</div>
</div>
<a id="ga853b4ced43d22fb5d82678dd2f0aba75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga853b4ced43d22fb5d82678dd2f0aba75">&#9670;&nbsp;</a></span>chMtxUnlockAll()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void chMtxUnlockAll </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unlocks all mutexes owned by the invoking thread. </p>
<dl class="section post"><dt>Postcondition</dt><dd>The stack of owned mutexes is emptied and all the found mutexes are unlocked. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function is <b>MUCH MORE</b> efficient than releasing the mutexes one by one and not just because the call overhead, this function does not have any overhead related to the priority inheritance mechanism.</dd></dl>
<dl class="section user"><dt>Function Class:\n Normal API, this function can be invoked by regular system threads but not from within a lock zone.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="chmtx_8c_source.html#l00528">528</a> of file <a class="el" href="chmtx_8c_source.html">chmtx.c</a>.</p>

<p class="reference">References <a class="el" href="group__mutexes.html#ga3f36a86fe485984ae29f7cb447c69221">chMtxUnlockAllS()</a>, <a class="el" href="group__system.html#ga464ae8092ca266ea0abffeb4c5639c8e">chSysLock()</a>, and <a class="el" href="group__system.html#gae3429d88fe6a75de02af1a089b9f620b">chSysUnlock()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__mutexes_ga853b4ced43d22fb5d82678dd2f0aba75_cgraph.png" border="0" usemap="#group__mutexes_ga853b4ced43d22fb5d82678dd2f0aba75_cgraph" alt=""/></div>
<map name="group__mutexes_ga853b4ced43d22fb5d82678dd2f0aba75_cgraph" id="group__mutexes_ga853b4ced43d22fb5d82678dd2f0aba75_cgraph">
<area shape="rect" title="Unlocks all mutexes owned by the invoking thread." alt="" coords="5,225,109,249"/>
<area shape="rect" href="group__mutexes.html#ga3f36a86fe485984ae29f7cb447c69221" title="Unlocks all mutexes owned by the invoking thread." alt="" coords="157,101,268,125"/>
<area shape="rect" href="group__system.html#ga464ae8092ca266ea0abffeb4c5639c8e" title="Enters the kernel lock state." alt="" coords="173,225,252,249"/>
<area shape="rect" href="group__system.html#gae3429d88fe6a75de02af1a089b9f620b" title="Leaves the kernel lock state." alt="" coords="167,307,258,331"/>
<area shape="rect" href="group__mutexes.html#ga89933152191cb4dfce30c2a6f42f8758" title="Returns true if the mutex queue contains at least a waiting thread." alt="" coords="316,5,467,29"/>
<area shape="rect" href="group__scheduler.html#ga74665c643003d2094a5c337a6857035e" title="Inserts a thread in the Ready List placing it behind its peers." alt="" coords="346,53,437,77"/>
<area shape="rect" href="group__scheduler.html#ga4e38b4bee3d2330f6a0f1cdb7660af20" title="Performs a reschedule if a higher priority thread is runnable." alt="" coords="329,101,454,125"/>
<area shape="rect" href="group__scheduler.html#gaa664d185361931ac4c38b7b01af92ff2" title="Removes the first&#45;out thread from a queue and returns it." alt="" coords="329,149,454,173"/>
<area shape="rect" href="group__checks__assertions.html#gaae453ff2b98bb0711c081c0496615250" title="Guard code for chSysLock()." alt="" coords="335,197,447,221"/>
<area shape="rect" href="group__statistics.html#ga813c62177261b1b03a87ba209409b44b" title="Starts the measurement of a thread critical zone." alt="" coords="323,246,459,282"/>
<area shape="rect" href="group__checks__assertions.html#gafdb3c25c67ce61bb8ed7a9121365b71c" title="Guard code for chSysUnlock()." alt="" coords="328,307,455,331"/>
<area shape="rect" href="group__statistics.html#gadd818821c119157b1ea6cd399ee4e647" title="Stops the measurement of a thread critical zone." alt="" coords="324,355,459,391"/>
</map>
</div>

</div>
</div>
<a id="ga89933152191cb4dfce30c2a6f42f8758"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga89933152191cb4dfce30c2a6f42f8758">&#9670;&nbsp;</a></span>chMtxQueueNotEmptyS()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool chMtxQueueNotEmptyS </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__mutexes.html#ga8ed8fbed56e1bda7b0315beb4efd04b3">mutex_t</a> *&#160;</td>
          <td class="paramname"><em>mp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns <code>true</code> if the mutex queue contains at least a waiting thread. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">mp</td><td>pointer to a <code>mutex_t</code> structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The mutex queue status.</dd></dl>
<dl class="section user"><dt>Function Class:\n This is an S-Class API, this function can be invoked from within a system lock zone by threads only.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="chmtx_8h_source.html#l00128">128</a> of file <a class="el" href="chmtx_8h_source.html">chmtx.h</a>.</p>

<p class="reference">References <a class="el" href="group__checks__assertions.html#ga14fe880e1dbd127d46077a1d300b1167">chDbgCheckClassS()</a>, <a class="el" href="structch__mutex.html#a8929c7569d5ae40c6384b677ba5332c4">ch_mutex::queue</a>, and <a class="el" href="group__scheduler.html#ga61aefe3e3bf61cad481289ad6b59071e">queue_notempty()</a>.</p>

<p class="reference">Referenced by <a class="el" href="group__mutexes.html#ga01630802b66eae988109e8a78147e988">chMtxUnlock()</a>, <a class="el" href="group__mutexes.html#ga3f36a86fe485984ae29f7cb447c69221">chMtxUnlockAllS()</a>, and <a class="el" href="group__mutexes.html#gac9ccd2e7b142de84a3fde7e9c8e6e445">chMtxUnlockS()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__mutexes_ga89933152191cb4dfce30c2a6f42f8758_cgraph.png" border="0" usemap="#group__mutexes_ga89933152191cb4dfce30c2a6f42f8758_cgraph" alt=""/></div>
<map name="group__mutexes_ga89933152191cb4dfce30c2a6f42f8758_cgraph" id="group__mutexes_ga89933152191cb4dfce30c2a6f42f8758_cgraph">
<area shape="rect" title="Returns true if the mutex queue contains at least a waiting thread." alt="" coords="5,29,156,53"/>
<area shape="rect" href="group__checks__assertions.html#ga14fe880e1dbd127d46077a1d300b1167" title="S&#45;class functions context check." alt="" coords="204,5,331,29"/>
<area shape="rect" href="group__scheduler.html#ga61aefe3e3bf61cad481289ad6b59071e" title="Evaluates to true if the specified threads queue is not empty." alt="" coords="210,53,325,77"/>
<area shape="rect" href="group__system.html#gaffab4052111407f092c7c65466a61450" title="Halts the system." alt="" coords="379,5,455,29"/>
</map>
</div>

</div>
</div>
<a id="ga4021c932a9b4a529665daf331a17b2fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4021c932a9b4a529665daf331a17b2fd">&#9670;&nbsp;</a></span>chMtxGetOwnerI()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group__scheduler.html#gaf01d0138673ae94162d218299408f142">thread_t</a>* chMtxGetOwnerI </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__mutexes.html#ga8ed8fbed56e1bda7b0315beb4efd04b3">mutex_t</a> *&#160;</td>
          <td class="paramname"><em>mp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the mutex owner thread. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">mp</td><td>pointer to a <code>mutex_t</code> structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The owner thread. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>if the mutex is not owned.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:\n This is an I-Class API, this function can be invoked from within a system lock zone by both threads and interrupt handlers.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="chmtx_8h_source.html#l00144">144</a> of file <a class="el" href="chmtx_8h_source.html">chmtx.h</a>.</p>

<p class="reference">References <a class="el" href="group__checks__assertions.html#ga3e4782dccbb385051e1eb01ac5b05470">chDbgCheckClassI()</a>, and <a class="el" href="structch__mutex.html#a5669fc591d43da82fe2ed9aa3be6f1d5">ch_mutex::owner</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__mutexes_ga4021c932a9b4a529665daf331a17b2fd_cgraph.png" border="0" usemap="#group__mutexes_ga4021c932a9b4a529665daf331a17b2fd_cgraph" alt=""/></div>
<map name="group__mutexes_ga4021c932a9b4a529665daf331a17b2fd_cgraph" id="group__mutexes_ga4021c932a9b4a529665daf331a17b2fd_cgraph">
<area shape="rect" title="Returns the mutex owner thread." alt="" coords="5,5,116,29"/>
<area shape="rect" href="group__checks__assertions.html#ga3e4782dccbb385051e1eb01ac5b05470" title="I&#45;class functions context check." alt="" coords="164,5,287,29"/>
<area shape="rect" href="group__system.html#gaffab4052111407f092c7c65466a61450" title="Halts the system." alt="" coords="335,5,411,29"/>
</map>
</div>

</div>
</div>
<a id="ga6985319a4da0c708835ccc1aa2e22e5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6985319a4da0c708835ccc1aa2e22e5b">&#9670;&nbsp;</a></span>chMtxGetNextMutexX()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group__mutexes.html#ga8ed8fbed56e1bda7b0315beb4efd04b3">mutex_t</a>* chMtxGetNextMutexX </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the next mutex in the mutexes stack of the current thread. </p>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the next mutex in the stack. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>if the stack is empty.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:\n This is an X-Class API, this function can be invoked from any context.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="chmtx_8h_source.html#l00159">159</a> of file <a class="el" href="chmtx_8h_source.html">chmtx.h</a>.</p>

<p class="reference">References <a class="el" href="group__threads.html#ga2ab8fe216688d604f80c9ec6eddc96a5">chThdGetSelfX()</a>, and <a class="el" href="structch__thread.html#a70cc5dae708945afe665b950f93b2ea6">ch_thread::mtxlist</a>.</p>

<p class="reference">Referenced by <a class="el" href="group__condvars.html#gaec560823aebbc92b21f1c92ab2c2996c">chCondWaitS()</a>, and <a class="el" href="group__condvars.html#ga48189fcf16cb499365879aa6c9755ba3">chCondWaitTimeoutS()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__mutexes_ga6985319a4da0c708835ccc1aa2e22e5b_cgraph.png" border="0" usemap="#group__mutexes_ga6985319a4da0c708835ccc1aa2e22e5b_cgraph" alt=""/></div>
<map name="group__mutexes_ga6985319a4da0c708835ccc1aa2e22e5b_cgraph" id="group__mutexes_ga6985319a4da0c708835ccc1aa2e22e5b_cgraph">
<area shape="rect" title="Returns the next mutex in the mutexes stack of the current thread." alt="" coords="5,5,141,29"/>
<area shape="rect" href="group__threads.html#ga2ab8fe216688d604f80c9ec6eddc96a5" title="Returns a pointer to the current thread_t." alt="" coords="189,5,292,29"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Aug 17 2020 09:42:06 for ChibiOS/RT by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
